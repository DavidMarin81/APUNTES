# Creación de una página con login para autenticar a través de httpOnly
## Creación del proyecto para el backend
- Creamos un proyecto con `ASP.NET Core Web API`
- Creamos una carpeta Model con `User.cs`
    ~~~csharp
    public class User
    {
        public int Id { get; set; }
        public string Username { get; set; } = string.Empty;
        public string Password { get; set; } = string.Empty; // En producción se debe hashear
        public string Role { get; set; } = string.Empty;     // "usuario" o "master"
    }
    ~~~
- En `Program.cs` creamos los datos de los usuarios
    ~~~csharp
    using nombreDelProyecto.Models;

    var app = builder.Build();

    // Lista de usaurios de ejemplo
    var users = new List<User>()
    {
        new User { Id = 1, Username = "David", Password = "123", Role = "usuario"},
        new User { Id = 2, Username = "Xian", Password = "123", Role = "master"}
    };
    ~~~
- En `Program.cs` añadimos la configuración de autenticación por cookie
    ~~~csharp
    // Autenticación por cookie
    builder.Services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)
        .AddCookie(options =>
        {
            options.Cookie.HttpOnly = true; // Crucial: JS no puede leer la cookie
            options.Cookie.SecurePolicy = CookieSecurePolicy.Always; // HTTPS obligatorio
            options.Cookie.SameSite = SameSiteMode.Strict;
            options.LoginPath = "/account/login";
        });

    builder.Services.AddAuthorization();


    var app = builder.Build();

    app.UseHttpsRedirection();

    app.UseAuthentication();
    app.UseAuthorization();

    app.MapControllers();

    app.Run();
    ~~~
- Con esto ya tenemos la base de sesiones seguras con cookies httpOnly

## Creamos el endpoint del login
- En `Controllers/AccountController.cs`

